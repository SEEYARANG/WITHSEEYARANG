{% load static %}
<!DOCTYPE html>
<html lang="ko">

<head>
    <!-- Webpage Title -->
    <title>로그인페이지</title>

    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
          integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm"
          crossorigin="anonymous">

    <!-- JS -->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"
            integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q"
            crossorigin="anonymous"></script>

    <!-- 구글폰트 -->
    <link href="https://fonts.googleapis.com/css?family=Do+Hyeon&display=swap" rel="stylesheet">
    
    <link rel="stylesheet" type = "text/css" href="{% static 'css/Userlogin.css'%}">
    
    <script src = "{%static 'js/csrftoken.js' %}" type = "text/javascript"></script>
    {% csrf_token %}
    <script type="text/javascript">
        function whenerror() {
            var product_name = $("#product_name").val()
            $.ajax({
                type:"POST",
                url: "{% url 'login' %}",
                data: {
                    'product': product_name
                },
                success: function(response){
                    window.location.replace('http://127.0.0.1:8000/home')
                },
                error: function(response){
                    alert('정확한 제품 번호를 입력해주세요')
                    window.location.reload();
                },
            })
        }
    
    </script>
    <script>
        function enterkey() {
            if (window.event.keyCode == 13) { 
                whenerror();
            }
        }
    </script>
</head>
<body>
    <div class="row">
        <div class="col-xs-6 col-md-4"></div>
        <div class="col-xs-6 col-md-4">
            <div class="loginblock">
                <div class="login">
                    <h1 class="center margin">로그인</h1>
                    <h6 class="center">제품의 번호를 입력해 주세요</h6>
                </div>
                <div>
                    {% csrf_token %}
                    <br>
                    <div class="id_div">
                        <input class="id" id = "product_name" onkeydown="enterkey()" type="text" placeholder="제품 번호">
                        
                        <br><br>
                        <button id = 'loginbtn' type="submit" class="mybtn" style="text-align: center" onclick="whenerror()">로그인</button>
                    </div>
                </div>
            </div>  
        </div>
        <div class="col-xs-6 col-md-4"></div>
      </div>
</body>